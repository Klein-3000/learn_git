# ä¸€ã€tag
```shell
# å¢
## åˆ›å»ºè½»é‡æ ‡ç­¾--ä¸å¸¸ç”¨
git tag <tag>
## åˆ›å»ºé™„æ³¨æ ‡ç­¾
git tag [-a]{add} <tag> -m < message >
## ç»™å†å²æäº¤æ‰“æ ‡ç­¾
git tag -a <tag> [< hash >]{å†å²æäº¤çš„å“ˆå¸Œå€¼} -m  < message >

# åˆ 
## åˆ é™¤æœ¬åœ°
git tag -d <tag>
## åˆ é™¤è¿œç¨‹
git push origin :refs/tags/<tag>

# æŸ¥
## æŸ¥çœ‹æœ‰å“ªäº›æ ‡ç­¾
git tag
## æŸ¥çœ‹é™„æ³¨æ ‡ç­¾çš„ä¿¡æ¯
git tag [-n1]{æŸ¥çœ‹å‰1çš„ä¿¡æ¯. -n99 : æŸ¥çœ‹é™„æ³¨ä¿¡æ¯çš„å‰**99**è¡Œä¿¡æ¯}
## æŸ¥çœ‹æŒ‡å®šæ ‡ç­¾çš„é™„æ³¨æ ‡ç­¾çš„ä¿¡æ¯
git tag -l "<æ­£åˆ™è¡¨è¾¾å¼>" -n
 
```
## æ ‡ç­¾æ¨é€ä¸è·å–
```shell
# æ¨é€
# æ¨é€æ ‡ç­¾åˆ°è¿œç¨‹ä»“åº“
## é»˜è®¤`git push`ä¸ä¼šæ¨é€æ ‡ç­¾
git push origin <tag>
## æ¨é€æ‰€æœ‰æ ‡ç­¾
git push origin --tags

# è·å–
git fetch origin --tags
 
```
## æ¡ˆä¾‹ -- åŸºäºæ ‡ç­¾å¼€å‘,åº”æ–°å»ºåˆ†æ”¯
```shell
git checkout -b [hotfix-from-< tag >]{å»ºè®®é‡‡ç”¨è¿™ç§å‘½åæ ¼å¼} <tag>
 
```

---

# äºŒã€å¯¼å‡ºå¯¹åº”æ ‡ç­¾çš„ç‰ˆæœ¬(archive)
## æœ¬åœ°
```shell
# windows
git archive  -o </path/to/file> <tag | commit_hash > [<dir-prefix>]

# linux
git archive  -o </path/to/file> <tag | commit_hash> [<dir-prefix>]
 
```
> [!attention] æ³¨æ„
> 1. åªæ”¯æŒ`tar`,`zip`,`tar.gz`
> 2. é»˜è®¤ä¸º`tar`
> 3. `zip`éœ€è¦æ˜ç¡®,æ—¢`-o archive.zip`
> 4. å…¶ä»–åç¼€åä¸€å¾‹ä¸º`tar`,æ—¢`-o archive.rar`åªèƒ½ç”Ÿæˆä¸€ä¸ªåä¸º`archive.rar`çš„`tar`æ–‡ä»¶

> [!note] `dir-prefix`
> 1. `git archive`é»˜è®¤æ—¶å…¨éƒ¨å½’æ¡£
> 2. `repo/{docs,src}`åªæƒ³è¦`repo/docs`åˆ™`-o archive.zip <hash> docs` 
> 3. å¯ä»¥ç²¾ç¡®åˆ°å½“ä¸ªæ–‡ä»¶, æ—¢`-o archive.zip <hash> docs/1.doc`
## è¿œç¨‹
```shell
git archive --remote=<è¿œç¨‹ä»“åº“URL> <tag | commit_hash > | tar -x -C ./output_dir
 
```
### æ¡ˆä¾‹
```shell
# å¯¼å‡ºè¿œç¨‹ä»“åº“ä¸­ tag ä¸º`v1.0.0` ç‰ˆæœ¬,å¹¶è‡ªåŠ¨è§£å‹
git archive --remote=git@gitee.com:verthandi-v/dangdang v1.0.0 | tar -x -C D:\downloads
 
```

âœ… ä¼˜ç‚¹ï¼š

- åªåŒ…å«è¯¥ç‰ˆæœ¬çš„**æºä»£ç æ–‡ä»¶**ï¼ˆä¸åŒ…å«Â `.git`Â ç›®å½•ï¼‰
- å¹²å‡€ã€è½»é‡ã€é€‚åˆäº¤ä»˜
- è‡ªåŠ¨æ’é™¤Â `.gitignore`Â ä¸­å¿½ç•¥çš„æ–‡ä»¶
### ğŸ’¡ è¡¥å……ï¼šå¦‚æœåŒäº‹ä¹Ÿéœ€è¦èƒ½ç»§ç»­å¼€å‘ï¼ˆå« Git å†å²ï¼‰

é‚£ä½ å¯ä»¥åˆ›å»ºä¸€ä¸ª**ä»…åŒ…å«åˆ° v1.0.1 çš„æµ…å±‚ä»“åº“**ï¼š
```shell
git clone --single-branch --branch v1.0.1 --depth 1 file://$(pwd) ../project-v1.0.1
cd ../project-v1.0.1
```
# ä¸‰ã€åœæ­¢è·Ÿè¸ªä¸é‡æ–°è·Ÿè¸ª(skip)
```shell
# åœæ­¢è·Ÿè¸ª
git update-index --skip-worktree < file >
# é‡æ–°è·Ÿè¸ª
git update-index --no-skip-worktree < file >
# æŸ¥çœ‹å·²ç»åœæ­¢è·Ÿè¸ªçš„æ–‡ä»¶
git cat-file [ | grep ^S ]{è¿‡æ»¤å‡ºåœæ­¢è·Ÿè¸ªçš„æ–‡ä»¶}

```
## ğŸ” çŠ¶æ€æ ‡è®°è¯´æ˜
- git ls-files -v çš„é¦–å­—æ¯å«ä¹‰ï¼š
- h = skip-worktreeï¼ˆéšè—çŠ¶æ€ï¼Œä½†å®é™…æ˜¾ç¤ºä¸º Sï¼‰
- S = skip-worktreeï¼ˆGit 2.25+ ç‰ˆæœ¬ä¸­æ˜ç¡®æ˜¾ç¤ºä¸º Sï¼‰
- H = assume-unchanged
-  'ï¼ˆç©ºæ ¼ï¼‰= æ­£å¸¸è¿½è¸ªçš„æ–‡ä»¶
- ğŸ’¡ æ³¨æ„ï¼šåœ¨è¾ƒæ–°ç‰ˆæœ¬çš„ Git ä¸­ï¼Œskip-worktree æ˜ç¡®æ˜¾ç¤ºä¸º Sï¼Œè€Œ assume-unchanged æ˜¾ç¤ºä¸º hã€‚
## âš ï¸ æ³¨æ„äº‹é¡¹
- `skip-worktree` vs `assume-unchanged`ï¼š
- `--skip-worktree`ï¼šå‘Šè¯‰ Git å¿½ç•¥å·¥ä½œåŒºå¯¹è¯¥æ–‡ä»¶çš„ä¿®æ”¹ï¼ˆå³ä½¿ä½ ä¿®æ”¹äº†ä¹Ÿä¸ä¼šæ˜¾ç¤ºä¸º modifiedï¼‰
- `--assume-unchanged`ï¼šå‘Šè¯‰ Git å‡è®¾æ–‡ä»¶æœªè¢«ä¿®æ”¹ï¼ˆä¸»è¦ç”¨äºæ€§èƒ½ä¼˜åŒ–ï¼‰
- å›¢é˜Ÿåä½œï¼š`skip-worktree` è®¾ç½®æ˜¯**æœ¬åœ°**çš„ï¼Œ**ä¸ä¼š**è¢«æ¨é€åˆ°è¿œç¨‹ä»“åº“ï¼Œå…¶ä»–åä½œè€…çœ‹ä¸åˆ°è¿™ä¸ªè®¾ç½®ã€‚
- é…ç½®æ–‡ä»¶åœºæ™¯ï¼šé€šå¸¸ç”¨äº==æœ¬åœ°é…ç½®æ–‡ä»¶==ï¼ˆå¦‚ .env.localã€database.ymlï¼‰ï¼Œé¿å…è¯¯æäº¤æ•æ„Ÿä¿¡æ¯ã€‚

---
# å››ã€ å¤ç”¨å…¶ä»–ä»“åº“çš„ä»£ç 
## æ¯”è¾ƒ

| åå­—                                          | åŒºåˆ«                |
| ------------------------------------------- | ----------------- |
| subtree                                     | å¤ç”¨å…¶ä»–ä»“åº“çš„ä»£ç          |
| [[gitè¿›é˜¶æ“ä½œ#ä¹ã€æ·»åŠ æ¨¡å—ä»“åº“(submodule)\| submodule]] | å°†å…¶ä»–ä»“åº“**å®Œæ•´**çš„åµŒå…¥åˆ°æœ¬åœ° |
## å‘½ä»¤
```shell
git subtree [add]{æ·»åŠ å­æ ‘(é¦–æ¬¡æ·»åŠ )}/[pull]{æ¥å–å­æ ‘æ›´æ–°(åç»­æ›´æ–°)} [--prefix < prefix >]{å­æ ‘åœ¨æœ¬åœ°ä»“åº“ä¸­çš„è·¯åŠ²(**æ–‡ä»¶å¤¹**åç§°)} [< repository >]{å¤–éƒ¨ä»“åº“åœ°å€(URL)} [< ref >]{å¤–éƒ¨ä»“åº“çš„åˆ†æ”¯æˆ–æ ‡ç­¾åç§°}
 
```

