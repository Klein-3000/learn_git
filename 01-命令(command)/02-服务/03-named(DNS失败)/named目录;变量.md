DNS ==53==

| 目录                         | 详情  |
| -------------------------- | --- |
| - /etc/named.conf          |     |
| - /etc/named.rfc1912.zones |     |
| d /etc/named               |     |

# 1.基础术语
- 解析方式
	- 正向解析 域名-->IP地址
	- 反向解析 IP地址-->域名
- 主DNS服务器（master）          ： 存储着原始资料
- 从DNS服务器（slave）            ： ==自动更新==从主DNS服务器同步DNS数据
- 缓存（递归）服务器（cache）：不负责本地解析，递归方式转发客户机的查询请求
- 转发器（forward）
- 域名分层结构（四层）
	1. 根域%%（Root Zone）%%
	2. 顶级域%%（）%% .com .cn等国际、国家级域名
	3. 次级域%%（Second Level Domains）%%
	4. 子域%%（sub Domains）%%
- 常见的DNS服务器
	1. Google 8.8.8.8
	2. 腾讯 114.114.114.114
	3. 阿里 233.6.6.6
# 2.记录类型
## 2.1RR（Resources Record）资源记录
- owner name ：所属名称
- TTL：缓存RR的秒数（time to live）
- CLASS：表示一个协议或者一组协议（常用IN表示Internet）
- TYPE ：RR类型
- rdATA ：记录数据
## 2.2RR常见解析记录类型（type）
- SOA:==区域授权起始==记录,区域文件==第一条记录==而且一个区域文件==只能有一条==
- NS:==名称==服务器解析记录
- MX:==邮件==服务器解析记录,配合A记录进行
- A ： 域名 --> ipv4地址
- AAAA :域名-->ipv6地址
- PTR :==逆向解析==(ip-->域名);设置==邮件服务器==才会用到
- CNAME:==别名记录==(Canonical name);给域名起别名
- TXT:文本记录;用于验证==域名所属权==以及==证书申请==校验时使用
- SRV:
# 3.DNS常规解析请求流程
example
访问 www.kernel.org
- 客户端
	1. 本地的==hosts==文件
	2. 本地==缓存==
- 本地DNS服务器
	1. 解析库
	2. 缓存
- 全球某一个==根域服务器==
	1. 发起DNS请求,返回==org域==的地址列表
	2. 使用某一个org域的IP地址发起DNS请求,返回==kernel域==的地址列表
	3. 使用某一个kernel域的IP地址发起DNS请求,==返回www.kernel.org主机的地址== ,本地DNS服务收到后,返回给客户机

> [!info] 两种查询
> 递归查询(recursion) : 本地DNS服务器只和==同一个==别的DNS服务器交互
> 迭代查询:~==多个==~
# 4.实验目标
- [ ] DNS解析记录及其简单使用；
- [ ] DNS的递归迭代查询和子域授权, DNS转发的实现过程和配置以及DNS主从域传输
- [ ] 介绍了DNS的区域传输数据加密及相关配置
- [ ] 企业内部DNS搭建实践篇

## 4.1bind9
bind服务需要开放的==端口==和说明:
- UDP 53 port 用于常规解析;
- TCP 53 port 用于bind同步数据等作用;
- TCP 953 port 用于IPv6解析;

## 4.2Syntax语法说明

```shell
# (1) 严格注意语法书写(其格式非常严格)
# (2) 解析记录(例如A、CNAME包括但不限于)都是不允许折行书写
# (3) 单行记录开头不准许空格或者tab开头
# (4) 字符说明
  # // 表示注销掉系统默认配置的zone信息所有行
  # ;  表示注释
  # @  表示当前域名它是DNS记录中的保留字
  # $  表示定义变量
```
## 4.3访问限制常用字句语句说明
- allow-query options,zone 指定哪主机或网络可以==查询==本服务器或区，==默认==的是==允许所有==主机进行查询。
- allow-transfer options,zone 指定哪些主机允许和本地服务器进行域==传输==（定允许复制zone数据的主机-主从必备），默认值是允许和所有主机进行域传输。
- allow-recursion options 指定哪些主机可以进行==递归查询==。如果没有设定，缺省是允许所有主机进行递归查询的。注意禁止一台主机的递归查询，并不能阻止这台主机查询已经存在于服务器缓存中的数据。
- allow-update zone 指定哪些主机允许为主域名服务器提交动态 DNS 更新。默认为拒绝任何主机进行更新。
- blackhole options 指定不接收来自哪些主机的查询请求和地址解析。默认值是 none 。
## 4.4日志的常用字句语句说明: 术语 含义
- channel（通道） 日志输出方式，如：syslog、文本文件、标准错误输出或 /dev/null
- category（类别） 日志的消息类别，如：查询消息或动态更新消息等
- module（模块） 产生消息的来源模块名称
- facility（设备） syslog 设备名
- severity（严重性） 消息的严重性等级
