以太网帧的结构包括以下几个部分：

1. **前导码（Preamble）**：用于同步接收方的时钟。
2. **帧开始定界符（Start Frame Delimiter, SFD）**：标识帧的开始。
3. **目的MAC地址（Destination MAC Address）**：6字节，标识帧的目标设备。
4. **源MAC地址（Source MAC Address）**：6字节，标识发送该帧的设备。
5. **类型/长度字段（Type/Length Field）**：
    - 在以太网II（Ethernet II）帧中，该字段表示上层协议的类型（例如IPv4为0x0800，ARP为0x0806）。
    - 在IEEE 802.3帧中，该字段表示数据字段的长度。
6. **数据（Data）**：承载上层协议的数据（如IP数据包或ARP请求）。
7. **帧校验序列（Frame Check Sequence, FCS）**：4字节，用于检测传输错误。它是帧尾的一部分。

### 为什么在捕获的数据包中看不到以太网的帧尾？

Wireshark等网络分析工具通常默认只显示帧的数据部分，并不直接展示FCS（帧校验序列），这是因为以下原因：

1. **FCS的作用**：
    
    - FCS是帧的最后4个字节，主要用于检测传输过程中可能发生的错误。
    - 它由发送端计算并附加到帧尾，在接收端再次计算并与接收到的FCS进行比较，从而判断帧是否损坏。
2. **网卡处理FCS**：
    
    - 网络接口卡（NIC）在接收数据帧时会自动处理FCS校验。如果帧通过了校验，则NIC会剥离FCS；如果校验失败，帧会被丢弃。
    - 因此，当数据帧被传递给操作系统和Wireshark时，FCS已经被网卡移除，导致捕获的数据包中没有帧尾信息。
3. **捕获模式限制**：
    
    - Wireshark依赖于操作系统的驱动程序或捕获库（如WinPcap/Npcap）来获取数据包。
    - 这些捕获库通常只能访问经过网卡处理后的数据，而无法访问原始的、包含FCS的完整帧，除非使用特殊的硬件或配置。

### 帧尾（FCS）在什么时候被处理？

1. **发送端**：
    
    - 当设备发送一个以太网帧时，它会在帧的末尾计算并添加FCS值。这个过程由硬件（网卡）完成，而不是由操作系统或应用程序处理。
2. **接收端**：
    
    - 接收端的网卡会读取整个帧，包括FCS。
    - 网卡重新计算帧的数据部分的校验和，并与FCS进行比较。
    - 如果校验成功，帧被认为是有效的，FCS被剥离，剩下的数据传递给操作系统。
    - 如果校验失败（即FCS不匹配），帧被认为已损坏，直接被丢弃，不会传递给操作系统或捕获工具。

### 总结

- **帧尾（FCS）不在Wireshark中显示的原因**：网卡在接收帧后会自动校验并剥离FCS，因此捕获工具无法看到完整的原始帧。
- **FCS的处理时机**：在发送端由网卡添加，在接收端由网卡校验并剥离。
- **特殊情况下查看FCS**：如果需要查看完整的帧（包括FCS），可以使用专门的硬件设备或设置某些网卡进入混杂模式并启用“保留FCS”选项（这取决于网卡驱动和捕获库的支持情况）。