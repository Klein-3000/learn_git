# æœ¬åœ°ç«¯å£è½¬å‘ -- LocalForward
![[ssh_local.png]]
```shell
# åŸºæœ¬æ ¼å¼
ssh -L [æœ¬åœ°IP:]{é»˜è®¤ä¸º**localhost**,åªèƒ½é€šè¿‡**localhost**æˆ–**127.0.0.1**è®¿é—®}æœ¬åœ°ç«¯å£:ç›®æ ‡ä¸»æœº:ç›®æ ‡ç«¯å£ user@è·³æ¿æœº

# å¤šç«¯å£
ssh -L ... -L ...

# å…¶ä»–å‚æ•°
## ç»„åˆå†™æ³•
ssh [-fNL ]{å‚æ•°ä½ç½®**ä¸èƒ½**å˜} [æœ¬åœ°IP:]æœ¬åœ°ç«¯å£:ç›®æ ‡ä¸»æœº:ç›®æ ‡ç«¯å£ user@è·³æ¿æœº
## æ‹†å¼€å†™æ³•
ssh -L 8080:192.168.1.16:9090 -N fedora

 
```
- `-L [bind_address:]port:host:hostport`ï¼šå®šä¹‰æœ¬åœ°è½¬å‘è§„åˆ™ï¼ˆå¿…é¡»ç´§è·Ÿå…¶å‚æ•°ï¼‰
- `-N`ï¼šä¸æ‰§è¡Œè¿œç¨‹å‘½ä»¤ï¼ˆå¸¸ç”¨äºçº¯ç«¯å£è½¬å‘ï¼‰
- `-f`ï¼šåå°è¿è¡Œï¼ˆWindows ä¸Šéƒ¨åˆ†ç‰ˆæœ¬æ”¯æŒï¼Œä½†è¡Œä¸ºå¯èƒ½ä¸å¦‚ Linux ç¨³å®šï¼‰
### ğŸ“Œ åŸç†ï¼š

- åœ¨Â **æœ¬åœ°æœºå™¨**Â ä¸Šç›‘å¬ä¸€ä¸ªç«¯å£ï¼ˆå¦‚Â `8080`ï¼‰ï¼›
- æ‰€æœ‰å‘å¾€è¯¥ç«¯å£çš„æµé‡ï¼Œé€šè¿‡ SSH éš§é“è½¬å‘åˆ°Â **è·³æ¿æœºï¼ˆSSH æœåŠ¡å™¨ï¼‰èƒ½è®¿é—®çš„æŸä¸ªç›®æ ‡ä¸»æœº:ç«¯å£**ã€‚

> æ³¨æ„ï¼š**â€œç›®æ ‡ä¸»æœºâ€æ˜¯ä»è·³æ¿æœºçš„è§†è§’è§£æçš„**ï¼ˆå³ç›®æ ‡ä¸»æœºå¯¹è·³æ¿æœºå¿…é¡»å¯è¾¾ï¼‰ã€‚

## é…ç½®
```shell
# ssh -L 3306:127.0.0.1:3306 user@server_ip
Host localPort
    Hostname <server_ip>
    User <user>
    LocalForward 3306 127.0.0.1:3306

```
---

# è¿œç¨‹ç«¯å£è½¬å‘ -- RemoteForward
![[ssh_remote.png]]
```shell
ssh -R [è¿œç¨‹IP:]è¿œç¨‹ç«¯å£:æœ¬åœ°ä¸»æœº:æœ¬åœ°ç«¯å£ user@è¿œç¨‹æœåŠ¡å™¨
 
```
### ğŸ“Œ åŸç†ï¼š

- åœ¨Â **è¿œç¨‹æœåŠ¡å™¨ï¼ˆSSH æœåŠ¡ç«¯ï¼‰**Â ä¸Šç›‘å¬ä¸€ä¸ªç«¯å£ï¼›
- æ‰€æœ‰å‘å¾€è¯¥è¿œç¨‹ç«¯å£çš„æµé‡ï¼Œé€šè¿‡ SSH éš§é“è½¬å‘å›Â **ä½ æœ¬åœ°æœºå™¨ï¼ˆSSH å®¢æˆ·ç«¯ï¼‰èƒ½è®¿é—®çš„æŸä¸ªæœåŠ¡**ã€‚

> æ³¨æ„ï¼š**â€œæœ¬åœ°ä¸»æœºâ€æ˜¯ä»ä½ å½“å‰å®¢æˆ·ç«¯çš„è§†è§’è§£æçš„**ã€‚
```shell
# ssh -L 3306:127.0.0.1:3306 user@server_ip
Host localPort
    Hostname <server_ip>
    User <user>
    RemoteForward 3306 127.0.0.1:3306
 
```
> [!attention] æ³¨æ„
> è¿œç¨‹ç«¯å£è½¬å‘éœ€è¦å¼€å¯
> - `GatewayPorts clientspecified`ï¼šå…è®¸å®¢æˆ·ç«¯ç”¨Â `-R [bind:]port:...`Â æŒ‡å®šç»‘å®šåœ°å€
> - `GatewayPorts yes`ï¼šæ‰€æœ‰Â `-R`Â è‡ªåŠ¨ç»‘å®šåˆ°Â `0.0.0.0`

âœ…Â **ä¸€å¥è¯è®°ä½**ï¼š

- **`-L`ï¼šæœ¬åœ°å¼€ä¸ªé—¨ï¼Œé€šå‘è¿œç¨‹å†…ç½‘**ï¼ˆæˆ‘è¦è¿›å»ï¼‰ã€‚
- **`-R`ï¼šè¿œç¨‹å¼€ä¸ªé—¨ï¼Œé€šå‘æˆ‘çš„æœ¬åœ°**ï¼ˆè®©äººè¿›æ¥ï¼‰ã€‚


---
# é“¾æ¥ä»£ç† -- ProxyJump
è·³æ¿é“¾æ¥/ä»£ç†è·³è½¬
## å‘½ä»¤
```shell
ssh -J Jump_user@Jump_host target_user@target_host
# éœ€è¦è¾“å…¥ä¸¤æ¬¡å¯†ç 
# Jump_user ä¸€æ¬¡
# target_user ä¸€æ¬¡
 
```
## é…ç½®
### åŸºæœ¬é…ç½®
```shell
Host tg
	HostHost <target_ip>
	User <target_user>
	ProxyJump Jump_user@Jump_host
 
```
### è¿›é˜¶é…ç½®
```shell
Host J
	HostHost <Jump_ip>
	User <Jump_user>
	IdentityFile /path/to/Jump_key
 
Host tg
	HostHost <target_ip>
	User <target_user>
	ProxyJump J
 	IdentityFile /path/to/target_key

 
```



